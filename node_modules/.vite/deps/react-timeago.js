import {
  require_react
} from "./chunk-YZZKIYU7.js";
import {
  __toESM
} from "./chunk-LQ2VYIYD.js";

// node_modules/react-timeago/es6/index.js
var React = __toESM(require_react());
var import_react = __toESM(require_react());

// node_modules/react-timeago/es6/dateParser.js
function dateParser(date) {
  const parsed = new Date(date);
  if (!Number.isNaN(parsed.valueOf())) {
    return parsed;
  }
  const parts = String(date).match(/\d+/g);
  if (parts == null || parts.length <= 2) {
    return parsed;
  } else {
    const [firstP, secondP, ...restPs] = parts.map((x) => parseInt(x));
    const correctedParts = [firstP, secondP - 1, ...restPs];
    const isoDate = new Date(Date.UTC(...correctedParts));
    return isoDate;
  }
}

// node_modules/react-timeago/es6/defaultFormatter.js
function defaultFormatter(value, _unit, suffix) {
  const unit = value !== 1 ? _unit + "s" : _unit;
  return value + " " + unit + " " + suffix;
}

// node_modules/react-timeago/es6/index.js
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
var MINUTE = 60;
var HOUR = MINUTE * 60;
var DAY = HOUR * 24;
var WEEK = DAY * 7;
var MONTH = DAY * 30;
var YEAR = DAY * 365;
var defaultNow = () => Date.now();
function TimeAgo({
  date,
  formatter = defaultFormatter,
  component = "time",
  live = true,
  minPeriod = 0,
  maxPeriod = WEEK,
  title,
  now = defaultNow,
  ...passDownProps
}) {
  const [timeNow, setTimeNow] = (0, import_react.useState)(now());
  (0, import_react.useEffect)(() => {
    if (!live) {
      return;
    }
    const tick = () => {
      const then2 = dateParser(date).valueOf();
      if (!then2) {
        console.warn("[react-timeago] Invalid Date provided");
        return 0;
      }
      const seconds2 = Math.round(Math.abs(timeNow - then2) / 1e3);
      const unboundPeriod = seconds2 < MINUTE ? 1e3 : seconds2 < HOUR ? 1e3 * MINUTE : seconds2 < DAY ? 1e3 * HOUR : 1e3 * WEEK;
      const period = Math.min(Math.max(unboundPeriod, minPeriod * 1e3), maxPeriod * 1e3);
      if (period) {
        return setTimeout(() => {
          setTimeNow(now());
        }, period);
      }
      return 0;
    };
    const timeoutId = tick();
    return () => {
      if (timeoutId) {
        clearTimeout(timeoutId);
      }
    };
  }, [date, live, maxPeriod, minPeriod, now, timeNow]);
  const Komponent = component;
  const then = dateParser(date).valueOf();
  if (!then) {
    return null;
  }
  const seconds = Math.round(Math.abs(timeNow - then) / 1e3);
  const suffix = then < timeNow ? "ago" : "from now";
  const [value, unit] = seconds < MINUTE ? [Math.round(seconds), "second"] : seconds < HOUR ? [Math.round(seconds / MINUTE), "minute"] : seconds < DAY ? [Math.round(seconds / HOUR), "hour"] : seconds < WEEK ? [Math.round(seconds / DAY), "day"] : seconds < MONTH ? [Math.round(seconds / WEEK), "week"] : seconds < YEAR ? [Math.round(seconds / MONTH), "month"] : [Math.round(seconds / YEAR), "year"];
  const passDownTitle = typeof title === "undefined" ? typeof date === "string" ? date : dateParser(date).toISOString().substr(0, 16).replace("T", " ") : title;
  const spreadProps = Komponent === "time" ? {
    ...passDownProps,
    dateTime: dateParser(date).toISOString()
  } : passDownProps;
  const nextFormatter = defaultFormatter.bind(null, value, unit, suffix);
  return React.createElement(Komponent, _extends({}, spreadProps, {
    title: passDownTitle
  }), formatter(value, unit, suffix, then, nextFormatter, now));
}
export {
  TimeAgo as default
};
//# sourceMappingURL=react-timeago.js.map
